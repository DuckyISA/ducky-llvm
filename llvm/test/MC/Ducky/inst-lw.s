; RUN: llvm-mc -triple ducky -show-encoding < %s 2> %t | FileCheck %s
; RUN: not test -s %t

test:
  lw r0, r0
  lw sp, fp
  lw r1, r2[0x79]
  lw r1, r2[-0x97]
  lw r1, r2[0x7fff]

; CHECK: lw r0, r0 ; encoding: [0x01,0x00,0x00,0x00]
; CHECK: lw sp, fp ; encoding: [0xc1,0xf7,0x00,0x00]
; CHECK: lw r1, r2[0x79] ; encoding: [0x41,0x10,0xf3,0x00]
; CHECK: lw r1, r2[-0x97] ; encoding: [0x41,0x10,0xd3,0xfe]
; CHECK: lw r1, r2[0x7fff] ; encoding: [0x41,0x10,0xff,0xff]
